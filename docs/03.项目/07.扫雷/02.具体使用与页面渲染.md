---
title: 具体使用与页面渲染
date: 2025-09-03 16:20:35
permalink: /pages/973502/
categories:
  - 项目
  - 扫雷
tags:
  - 
---
`vue`相关代码比较简单，我们只需要`new`一个封装的扫雷类将得到的`board.list`二维数组进行渲染即可。通过格子的不同状态和数值展示不同样式模拟点击和标记操作。完整代码如下：
::: center
![minsweeper](https://lhost.oss-cn-chengdu.aliyuncs.com/blog/minsweeper.gif)
:::
```vue
<script lang="ts" setup>
import { ref, computed } from 'vue';
import { MineSweeper } from './mine';

const game = new MineSweeper(9);

const mineList = computed(() => {
  return game.boardList
})

const cellClass = computed(() => {
  return (cell) => {
    return {
      'cell-mine': cell.isRevealed && cell.value === -1,
      'cell-flag': !cell.isRevealed && cell.isFlagged,
      'cell-empty': cell.isRevealed && cell.value === 0,
      ['cell-number-' + cell.value]: cell.isRevealed && cell.value > 0,
    }
  }
})
</script>

<template>
  <div class="mine-sweeper">
    <div class="top">
      <div class="opts">
        <button @click="game.resetGame">重新开始</button>
      </div>
    </div>
    <div class="board">
      <div
        class="row"
        v-for="(row, y) in mineList"
        :key="y"
      >
        <div
          v-for="(cell, x) in row"
          :key="x"
          class="cell"
          :class="cellClass(cell)"
          :data-value="cell.value"
          @click="game.revealCell(x, y)"
          @contextmenu.prevent="game.flagCell(x, y)"
        >
        </div>
      </div>
    </div>
  </div>
</template>

<style lang="scss">
.mine-sweeper {
  height: 100vh;
  background-color: #47485C;
  .opts {
    display: flex;
    align-items: center;
    padding-top: 32px;
    justify-content: center;
  }
  .board {
    margin: 0 auto;
    padding: 24px;
    width: fit-content;
    .row {
      display: flex;
      .cell {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 30px;
        height: 30px;
        font-size: 18px;
        cursor: pointer;
        background: #c4c4c4;
        border: 2px solid;
        border-color: white #999 #999 white;
        &-empty {
          cursor: pointer;
          pointer-events: none;
          background: #c0c0c0;
          border: 2px solid #999;
        }
        &-number-1, &-number-2, &-number-3, &-number-4, &-number-5, &-number-6, &-number-7, &-number-8 {
          color: blue;
          background: #c0c0c0;
          cursor: pointer;
          pointer-events: none;
          border: 2px solid #999;
          &::after {
            content: attr(data-value);
          }
        }
        &-number-2 {
          color: green;
        }
        &-number-3 {
          color: yellow;
        }
        &-number-4 {
          color: orange;
        }
        &-number-5 {
          color: red;
        }
        &-number-6 {
          color: purple;
        }
        &-number-7 {
          color: pink;
        }
        &-number-8 {
          color: brown;
        }
        &-flag {
          &::after {
            content: '🚩';
          }
        }
        &-mine {
          background: red;
          cursor: pointer;
          pointer-events: none;
          border: 2px solid #999;
          &::after {
            content: '💣';
          }
        }
      }
    }
  }
}
</style>
```